<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

	<title>cosmoz-omnitable-treenode-column demo</title>

	<script src="/components/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
	<script src="/components/web-animations-js/web-animations-next-lite.min.js"></script>

	<script type="module" src="../cosmoz-omnitable-treenode-column.js"></script>

	<script type="module" src="/components/@polymer/iron-demo-helpers/demo-pages-shared-styles.js"></script>
	<script type="module" src="/components/@polymer/iron-demo-helpers/demo-snippet.js"></script>
	<script type="module" src="/components/@polymer/iron-flex-layout/iron-flex-layout.js"></script>
	<script type="module" src="/components/@polymer/iron-flex-layout/iron-flex-layout-classes.js"></script>
	<script type="module" src="/components/@polymer/iron-ajax/iron-ajax.js"></script>
	<script type="module" src="/components/@neovici/cosmoz-omnitable/cosmoz-omnitable.js"></script>

	<script type="module">
	const container = document.createElement('template');

	container.innerHTML = `<custom-style>
			<style is="custom-style" include="demo-pages-shared-styles iron-flex iron-positioning">
				body {
					@apply --layout-fullbleed;
					@apply --layout-vertical;
				}

				#snippet {
					@apply --layout-flex;
					@apply --layout-vertical;
					@apply --layout-relative;

					--demo-snippet-demo: {
						@apply --layout-flex;
						position: relative;
					};

					--demo-snippet-code: {
					};

				}

			</style>
		</custom-style>`;

	document.body.appendChild(container.content);
	</script>
</head>
<body class="fullbleed">
	<h3>cosmoz-omnitable-treenode-column demo</h3>

	<script type="module">
		const container = document.createElement('template');

		container.innerHTML = `<demo-snippet id="snippet">
			<template>
				<dom-bind id="basic">
					<template is="dom-bind">
						<iron-ajax id="ajax" auto url="/components/@neovici/cosmoz-tree/demo/tree.json" handle-as="json"
							last-response="{{ treeJson }}" debounce-duration="300" on-response="handleResponse">
						</iron-ajax>
						<cosmoz-omnitable data="[[ getTableData(treeJson) ]]" class="fit">
							<cosmoz-omnitable-column name="name" title="Name" value-path="name" min-width="200px">
							</cosmoz-omnitable-column>
							<cosmoz-omnitable-treenode-column name="node" title="Node" flex="5" show-max-nodes="3"
								value-path="nodeId" key-property="id" owner-tree="[[ getOwnerTree(treeJson) ]]">
							</cosmoz-omnitable-treenode-column>
						</cosmoz-omnitable>
					</template>
				</dom-bind>
			</template>
		</demo-snippet>`;

		document.body.appendChild(container.content);
	</script>

	<script type="module">
		import { CosmozDefaultTree } from '@neovici/cosmoz-tree/cosmoz-default-tree';

		/* eslint-disable-next-line max-lines-per-function */
		window.addEventListener('WebComponentsReady', () => {
			let basic = document.getElementById('basic');
			basic = !basic.set ? basic.firstElementChild : basic;

			basic.handleResponse = () => {
				console.log('tree data');
			};

			basic.getOwnerTree = treeJson => {
				return new CosmozDefaultTree(treeJson);
			};

			basic.getTableData = () => {
				return [
					{
						name: 'Sed a quam interdum',
						nodeId: '167d1485-7d4f-4c7d-86cd-a4fb00f31245'
					},
					{
						name: 'Euismod sapien non',
						nodeId: '3a7654f1-e3e6-49c7-b6a8-a4fb00f31245'
					},
					{
						name: 'rhoncus dolor',
						nodeId: '426d7dba-a4f0-4bd4-9b34-a4fb00f31248'
					},
					{
						name: 'Duis mollis leo ut nibh sagittis',
						nodeId: '1641faed-1043-450e-868d-a4fb00f3124f'
					},
					{
						name: 'a porta leo maximus',
						nodeId: '53f0b29d-6755-4099-b70c-a4fb00f3124e'
					},
					{
						name: 'Fusce tristique leo',
						nodeId: 'a0ae20d8-7074-4bfb-9864-a4fb00f3124d'
					},
					{
						name: 'a porttitor porttitor',
						nodeId: '81e3a3ef-abae-4781-aa4c-a4fb00f31252'
					},
					{
						name: 'Nam finibus leo euismod',
						nodeId: 'abbe92c9-d7f4-448e-a531-a4fb00f31249'
					},
					{
						name: 'Sed luctus leo sollicitudin',
						nodeId: '8d55d691-b8a8-4292-ad4a-a4fb00f3124e'
					},
					{
						name: 'Cras laoreet erat ut eros viverra egestas',
						nodeId: '6fd57f4f-43e9-4a4c-800c-a4fb00f31246'
					},
					{
						name: 'Etiam sit amet mauris semper',
						nodeId: '219b3399-7edd-42b7-ad92-a4fb00f31247'
					}
				];
			};
		});
	</script>


</body>
</html>
